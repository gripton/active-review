<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <!-- Styles -->
    <link href="../Content/bootstrap.css" rel="stylesheet" />
    <link href="../Content/bootstrap-responsive.css" rel="stylesheet" />
    <link href="../Content/custom.css" rel="stylesheet" />
    <script type="text/javascript" src="../Scripts/tinymce/tiny_mce.js"></script>
    <script type="text/javascript" src="../Scripts/knockout-2.2.1.js"></script>
    <script type="text/javascript" src="../Scripts/knockout.mapping-2.4.1.js"></script>
    
</head>
    <body>
            <div class="navbar navbar-fixed-top" id="Header" style="height:60px;">
                <div class="navbar-inner">
                    <div class="container">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="#">Active Requirements Review</a>
                        <div class="nav-collapse">
                            <ul class="nav">
                                <li><a href="Home.html"><i class="icon-home icon-white"></i> Home</a></li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">File <b class="caret"></b></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#">New</a></li>
                                        <li><a href="#">Open</a></li>
                                        <li><hr/></li>
                                        <li><a href="#renameDialog" data-toggle="modal" data-bind="click: $root.renameSessionViewModel.setTitle">Rename</a></li>
                                        <li><a href="#" data-bind="click: $root.save">Save</a></li>
                                        <li><a data-bind="attr: { href: 'Preview.html?reviewSession=' + reviewSessionId }">Preview</a></li>
                                        <li><hr/></li>
                                        <li><a href="#" data-bind="click: $root.release">Release</a></li>
                                        <li><a href="#">Assign Reviewer</a></li>
                                        <li data-bind="with: $root.reviewSession"><a href="#spawnDialog" data-toggle="modal" data-bind="click: $root.spawnReviewViewModel.spawnSetup">Spawn</a></li>
                                    </ul>
                                </li>
                                <li ><a href="#">Help</a></li> 
                            </ul>
 
                        </div><!-- /.nav-collapse -->
                    </div><!-- /.container -->
                </div><!-- /.navbar-inner -->
            </div><!-- /.navbar -->
        <div>
            <div id="Title">
                <h5>Session: <span data-bind="text: reviewSession.Title"></span></h5>
            </div>
            <div id="Content">
                <div class="row-fluid">
                    <fieldset class="well span6">
                        <legend class="the-legend">Requirements</legend>
                        <div id="Top_Left" class="row-fluid" data-bind="foreach: reviewSession.Requirements">
                            <div>
                                <div class="span1">
                                </div>
                                <div class="span9"><a href="#" ></a>
                                    <a href="#editRequirementDialog" class="btn btn-small btn-primary" data-toggle="modal" role="button" data-bind="click: $root.editRequirementViewModel.setEditRequirement">Edit</a>
                                    &nbsp;
                                    <a href="#commentDialog" class="btn btn-small btn-primary" data-toggle="modal" role="button" data-bind="click: $root.editCommentViewModel.setComment" >Comment</a>
                                </div>
                                <div class="span2" style="text-align:right;">
                                    <a href="#" class="btn btn-small btn-primary" role="button" data-bind="click: $root.deleteRequirementViewModel.deleteRequirement" >Delete</a>
                                </div>
                                <div class="row-fluid">
                                    <div class="span1">
                                        <span data-bind="text: $index() + 1"></span>:
                                    </div>
                                    <div class="span11" data-bind="html: Content"></div>
                                </div>
                            </div>
                        </div>
                        <div id="Bottom_Left" style="height:180px;">
                            <textarea style="width:100%" class="tinymce" data-bind="tinymce: newRequirementViewModel.newRequirement"></textarea>
                            <br />
                            <button class="btn-primary" data-bind="click: newRequirementViewModel.addRequirement">Add Requirement</button>
                        </div>
                    </fieldset>
                    <fieldset class="well span6" style="min-width:400px;">
                        <legend class="the-legend">Questionnaire</legend>
                        <div class="row-fluid" id="Top_Right">
                            <div class="span12" data-bind="foreach: reviewSession.Questions">
                                <div class="row-fluid">
                                    <div class="span1"></div>
                                    <div class="span9">
                                        <a href="#editQuestionDialog" class="btn btn-small btn-primary" data-toggle="modal" role="button" data-bind="click: $root.editQuestionViewModel.setEditQuestion">Edit</a>
                                    </div>
                                    <div class="span2" style="text-align:right;">
                                        <a href="#" class="btn btn-small btn-primary" role="button" data-bind="click: $root.deleteQuestionViewModel.deleteQuestion" >Delete</a>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span1">
                                        <span data-bind="text: $index() + 1"></span>:
                                    </div>
                                    <div class="span11">
                                        <span data-bind="html: Content"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="Bottom_Right" style="height:180px;">
                            <textarea style="width:100%" class="tinymce" data-bind="tinymce: newQuestionViewModel.newQuestion"></textarea>
                            <br />
                            <button class="btn-primary" data-bind="click: newQuestionViewModel.addQuestion">Add Question</button>
                        </div>
                    </fieldset>
                </div>
            </div>
            <div id="Footer">

            </div>
            <!-- Comment Modal -->
            <div id="commentDialog" class="modal hide fade" tabindex="-1" role="dialog" 
                 aria-labelledby="commentModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="commentModalLabel">Requirement Comments</h3>
                </div>
                <div class="modal-body">
                    <textarea id="commentText" data-bind="value: editCommentViewModel.currentComment" style="width:97%"></textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" data-bind="click: editCommentViewModel.saveComment">Save changes</button>
                </div>
            </div>

            <!-- Edit Title Modal -->
            <div id="renameDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="renameModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="H3">Rename Session</h3>
                </div>
                <div class="modal-body">
                    <input style="width:98%" data-bind="value: renameSessionViewModel.currentTitle" />
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" data-bind="click: renameSessionViewModel.saveTitle">Rename</button>
                </div>
            </div>

            <!-- Edit Requirement Modal -->
            <div id="editRequirementDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="commentModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="H1">Edit Requirement</h3>
                </div>
                <div class="modal-body">
                    <textarea style="width:100%" class="tinymce" data-bind="tinymce: editRequirementViewModel.currentRequirement"></textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" data-bind="click: editRequirementViewModel.saveEditedRequirement">Change</button>
                </div>
            </div>
            
            <!-- Edit Requirement Modal -->
            <div id="editQuestionDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editQuestionModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="H4">Edit Question</h3>
                </div>
                <div class="modal-body">
                    <textarea style="width:100%" class="tinymce" data-bind="tinymce: editQuestionViewModel.currentQuestion"></textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" data-bind="click: editQuestionViewModel.saveEditedQuestion">Change</button>
                </div>
            </div>

            <!-- Spawn Session Modal -->
            <div id="spawnDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="commentModalLabel" aria-hidden="true" data-bind="with: spawnReviewViewModel.spawnInstance">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="H2">Spawn Review<span></span></h3>
                </div>
                <div class="modal-body">
                    <div class="control-group">
                        <h5>Name</h5>
                        <div class="controls">
                            <input id="spawnName" type="text" data-bind="value: Title"/>
                        </div>
                    </div>
                    <div>
                        <h5>Requirements</h5>
                        <div data-bind="foreach: Requirements">
                            <div class="row-fluid">
                                <div class="span2">
                                    <input type="checkbox" data-bind="checked: Copy, attr: { value: $data }" />
                                    <span data-bind="text: $index() + 1"></span>:
                                </div>
                                <div class="span10"  data-bind="html: Requirement.Content"></div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h5>Questions</h5>
                        <div data-bind="foreach: Questions">
                            <div class="row-fluid">
                                <div class="span2">
                                    <input type="checkbox" data-bind="checked: Copy, attr: { value: $data }" />
                                    <span data-bind="text: ($index() + 1) + ':'"></span>
                                </div>
                                <div class="span10" data-bind="html: Question.Content">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button class="btn btn-primary" aria-hidden="true" data-dismiss="modal" data-bind="click: $root.spawnReviewViewModel.spawn" >Hatch</button>
                </div>
            </div>
        </div>
        <div id="Loader" data-bind="loadingWhen: isLoading">
            <div id="horizon">
                <div id="LoadingDiv">
                    <h4>Loading...</h4>
                    <img alt="activity indicator" src="../Content/images/ajax-loader.gif"/>
                </div>
            </div>
        </div>

        <div id="PageMask" class="modal-backdrop" data-bind="loadingWhen: isLoading">
        </div>
        <!-- Bootstrap jQuery Plugins, compiled and minified -->
        <script type="text/javascript" src="../Scripts/jquery-2.0.0.js"></script>
        <script type="text/javascript" src="../Scripts/jquery.base64.js"></script>
        <script type="text/javascript" src="../Scripts/jquery.cookie.js"></script>
        <script type="text/javascript" src="../Scripts/purl.js"></script>
        <script type="text/javascript" src="../Scripts/tinymce/jquery.tinymce.js"></script>
        <script type="text/javascript" src="../Scripts/bootstrap.js"></script>
        <script type="text/javascript" src="../Scripts/tinymce/plugins/bbcode/editor_plugin.js"></script>
        <script type="text/javascript" src="../Scripts/tinymce/plugins/bbcode/editor_plugin_src.js"></script>
        <script type="text/javascript" src="../Scripts/arr-urls.aspx"></script>
        <script type="text/javascript" src="../Scripts/Commands/arr-security-commands.js"></script>
        <script type="text/javascript" src="../Scripts/Commands/arr-loading-commands.js"></script>
        <script type="text/javascript" src="../Scripts/Commands/arr-tinymce-commands.js"></script>
        <script type="text/javascript" src="../Scripts/Commands/arr-resize-commands.js"></script>
        <script type="text/javascript" src="../Scripts/Commands/arr-dirty-model-commands.js"></script>
        <script type="text/javascript" src="../Scripts/Model/arr-requirements-model.js"></script>
        <script type="text/javascript" src="../Scripts/ViewModel/arr-spawn-view-model.js"></script>
        <script type="text/javascript" src="../Scripts/ViewModel/arr-review-editor-view-model.js"></script>
    </body>
</html>